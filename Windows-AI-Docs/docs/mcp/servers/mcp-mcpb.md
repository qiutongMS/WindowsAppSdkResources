---
title: Register an MCP server with an MCP bundle
description: Learn how to register an MCP server on Windows using an MCP bundle
ms.date: 11/11/2025
ms.topic: quickstart
keywords: MCP, Model Context Protocol, Windows, quickstart, tutorial
no-loc: [Model Context Protocol, MCP, Windows AI Foundry]
---

# Register an MCP server with an MCP bundle

This article will walk through the process of registering an MCP server using an MCP bundle, a package format that standardize deployment for MCP servers. For more information on this package format, see the MCP bundle github repo, [github.com/anthropics/mcpb/](https://github.com/anthropics/mcpb/) are  You can include an MCPB into your existing Windows app, or you can distribute the MCPB on its own.

Apps that are packaged using the MSIX package format can include metadata in their package that will automatically register the MCP server when the package is installed. For more information see, [Register an MCP server from an app with package identity](mcp-windows-identity.md).

> [!WARNING]
> MCP servers run in an agent session that runs under its own user account. MCP bundles are not supported in the agent session, and are therefore not supported by default. Servers registered using MCP bundles will not be accessible from the Windows on-device agent registry. For testing purposes, you can enable MCP bundles for agent sessions. For more information including important security caveats, see [Reducing protections for agent connectors](./mcp-containment.md#reducing-protections-for-agent-connectors).

> [!NOTE]
> **Some information relates to pre-released product, which may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.**

## Prerequisites

- Windows build 26220.7262 or higher 
- Developer mode enabled. For more information, see [Developer Mode features and debugging](/windows/apps/get-started/developer-mode-features-and-debugging).
- The .NET SDK. For installation information, see [Install .NET on Windows](/dotnet/core/install/windows#install-the-sdk).

## Install the MCP bundle tooling package

Open the command line and install the NPM package with this command:

```powershell
dotnet tool install -g mcpb.cli
```

## Build your MCP Bundle

You can initialize and build your bundle by running `mcpb init` and `mcpb pack`. For more information, see the [MCPB .NET CLI github repo](https://github.com/asklar/mcpb/blob/dotnet/dotnet/README.md).

You can also use the [MCP server C# sample](https://github.com/microsoft/mcp-on-windows-samples/tree/main/mcp-server-csharp) to generate a MCP bundle to test with using the following commands:

```powershell
git clone https://github.com/microsoft/mcp-on-windows-samples.git
cd mcp-on-windows-samples
cd mcp-server-csharp
.\build-mcpb.ps1
```

These commands will create a file named `mcp-dotnet-mcpb-server.mcpb` in the `mcp-server-csharp` folder.

### The _meta section of the MCPB config JSON file

MCP on Windows and the on-device agent registry (ODR) require the inclusion of the `_meta` section of the MCP bundle manifest schema, which is intended to hold optional extensions to the schema. ODR uses the following properties that are declared in the `_meta` section of the manifest, as children of the `com.microsoft.windows` object.

| Property | Description |
|----------|-------------|
| package_family_name | The server's package family name. The value of this property is always generated by ODR. If a server provides them while registering, they are ignored. |
| static_responses | The MCP server being registered must provide this section which lists all capabilities and tools provided by the server. This list much match the runtime responses list exactly. This allows ODR to validate that the only expected tools and capabilities are provided at runtime and enables tool discovery for MCP hosts without launching the MCP server, which can generate consent prompts and the associated performance costs. |

> [!IMPORTANT]
> If you want your MCP server to run in default mode, the values returned by your server implementation must match the values declared in your MCPB file.

Some examples of values in the MCPB file that must match those returned by your server implementation include the following:

- The top-level `name` and version properties must match the `name` and `version` property in `serverInfo` inside the **initialize** section.
- The top-level `tools` must be present in the `tools/list` richer schema.
- The server must not dynamically change the set of tools, their descriptions, or input or output schemas.
- The server's `initialize` and `tools/list` at runtime must match what is in the manifest.

If you update any of these values in your server, you must update the MCPB config file to match the new values or your MCP server will no longer run in default mode. The .NET CLI MCPB can be used to produce and validate valid _meta fields for your server.

The following shows an example **_meta** section from an MCPB config file.

```json
{
  "_meta": {
    "com.microsoft.windows": {
      "static_responses": {
        "initialize": {
          "protocolVersion": "2025-06-18",
          "capabilities": {
            "logging": {},
            "tools": {
              "listChanged": true
            }
          },
          "serverInfo": {
            "name": "ProductStockSystem.McpServer",
            "version": "1.0.0.0"
          }
        },
        "tools/list": {
          "tools": [
            {
              "name": "list_products",
              "description": "Get a list of all active products in the stock system",
              "inputSchema": {
                "type": "object",
                "properties": {}
              },
              "outputSchema": {
                "type": "object",
                "properties": {
                  "products": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "sku": {
                          "type": "string"
                        },
                        "price": {
                          "type": "number"
                        },
                        "stockQuantity": {
                          "type": "integer"
                        },
                        "reorderLevel": {
                          "type": "integer"
                        },
                        "isLowStock": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "sku",
                        "price",
                        "stockQuantity",
                        "reorderLevel",
                        "isLowStock"
                      ]
                    }
                  },
                  "count": {
                    "type": "integer"
                  },
                  "success": {
                    "type": "boolean"
                  },
                  "error": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "required": [
                  "products",
                  "count",
                  "success"
                ]
              }
            }
          ]
        }
      }
    }
  }
}

```


## Distribute your `.mcpb` file or include it as part of your app

You can distribute the `.mcpb` file directly, as-is, to ship a standalone MCP server or you can integrate it as part of your application by executing the `.mcpb` bundle file during install of your application.
 
## Test your MCP server

You can now test that your MCP server shows up correctly as part of regular app install by test installing your app and then using the [testing guide](./test-mcp-server.md) to interact with it. For more information, see [Testing MCP servers on Windows](test-mcp-server.md).

## Next steps

- Learn about the features of the agent session for MCP for Windows and understand why you might want to move your app to use MSIX and package identity in order to use the agent session. For more information, see [Securely containing MCP servers on Windows](./mcp-containment.md).
